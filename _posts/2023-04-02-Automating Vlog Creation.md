---
audio_embed_code: "\n            <audio controls>\n              <source src=\"/assets/audio/2023-04-01-Jekyll\
  \ Workflow File Location.mp3\" type=\"audio/mpeg\">\n              Your browser\
  \ does not support the audio element.\n            </audio>\n            "
video_embed_code: "\n            <video controls>\n              <source src=\"/output_video/default.mp4\" type=\"video/mpeg\">\n              Your browser\
  \ does not support the video element.\n            </video>\n            "
categories:
- AI
- tutorial
date: '2023-04-02'
image: /assets/images/2023-04-02-Automating Vlog Creation.png
layout: post
tags:
- categories
- AI
- tutorial
- template
title: Automating Vlog Creation
---
Sure, you can modify the script to look for the specified default video in each post and then update the post with the new video link. To achieve this, you can follow these steps:

1.  Modify the `process_blog_posts` function to search for the specified default video and update the video source in the blog post:

```
pythonCopy codedef process_blog_posts(posts_dir, audio_dir, default_video_src, background_image):
    for file in os.listdir(posts_dir):
        if file.endswith(".md"):
            file_path = os.path.join(posts_dir, file)

            with open(file_path, 'r', encoding='utf-8') as post_file:
                content = post_file.read()

            # Check if the post contains the default video src
            if default_video_src in content:
                # Extract date and title from the filename
                date, title = os.path.splitext(file)[0].split('-', 1)

                # Create the path to the TTS MP3 file
                tts_mp3 = os.path.join(audio_dir, f'{date}-{title}.mp3')

                # Check if the TTS MP3 file exists
                if os.path.isfile(tts_mp3):
                    # Generate the video using the generate_video function
                    output_video = f'output_videos/{date}-{title}.mp4'
                    generate_video(background_image, tts_mp3, output_video, title.replace('-', ' '))
                    print(f"Video generated: {output_video}")

                    # Upload the video to YouTube and get the video ID
                    video_id = upload_video_to_youtube(
                        output_video,
                        title.replace('-', ' '),
                        f"Autogenerated video for blog post: {title.replace('-', ' ')}",
                        '22',  # Category ID (22 is for "People & Blogs", change as needed)
                        ['autovlog', 'JPyPA'],  # Tags (change as needed)
                        'path/to/your/credentials.json'  # Replace with the path to your downloaded service account JSON file
                    )

                    if video_id:
                        print(f'Uploaded video to YouTube, Video ID: {video_id}')
                        # Replace the default video source with the new video link in the post content
                        updated_content = content.replace(
                            default_video_src,
                            f'https://www.youtube.com/watch?v={video_id}'
                        )

                        # Write the updated content back to the blog post file
                        with open(file_path, 'w', encoding='utf-8') as post_file:
                            post_file.write(updated_content)
                        print(f"Updated blog post with new video link: {file}")

```

2.  Update the `if __name__ == "__main__"` block to include the `default_video_src`:

```
pythonCopy codeif __name__ == "__main__":
    posts_dir = '_posts'
    audio_dir = 'assets/audio'
    default_video_src = '/output_video/default.mp4'  # Replace with your default video src
    background_image = 'background.jpg'  # Replace with the path to your background image

    # Create a directory for output videos if it doesn't exist
    if not os.path.exists('output_videos'):
        os.makedirs('output_videos')

    process_blog_posts(posts_dir, audio_dir, default_video_src, background_image)

```

With these changes, the script will search for blog posts with the specified default video source, generate a new video for each post, upload it to YouTube, and update the video source in the post with the new video link.